<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BTS Concert Booking</title>
    <link
      rel="stylesheet"
      href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css"
    />
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/all.css"
      rel="stylesheet"
    />
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Roboto:wght@400;500;700&display=swap"
        rel="stylesheet">
    <!-- Stylesheet -->
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <!--Header and Menu Section-->
    <header class="container">
        <nav>
            <ul>
                <li><img src="images/logo_army.png" alt="" width="40" height="45"></li>
                <li><a href="file:///C:/Users/ADMIN/Desktop/website/index.html">Home</a></li>
                <li><a href="file:///C:/Users/ADMIN/Desktop/website/about.html">About Us</a></li>
                <li><a href="file:///C:/Users/ADMIN/Desktop/website/contact.html">Contact</a></li>
                <li><a class="active" href="file:///C:/Users/ADMIN/Desktop/website/index.html">Reassess</a></li>
            </ul>
        </nav>
    </header>

    <!--Booking Section-->
    <main class="main-content container">
            <div class="booking-content">
                <h1>ARMYPEDIA</h1><br>
                <p>
                    The archive of all things
                    BTS, made by ARMY!

                    Book your tickets <i>NOW</i> and start reaching a global audience of fans.
                </p>
            </div>


            <div class="booking-form">
                <div id="booking-going-on">
                        <h3>Tickets to the Greatest Concert Ever!</h3>
                            Get tickets today before it's too late!
                    <div class="input-group">
                        <label for="">Name</label>
                        <input id="flying-from-input" class="inp-style" type="text" name="" placeholder="Enter your name">
                    </div>
                    <div class="input-group">
                        <label for="">Contact No.</label>
                        <input id="flying-to-input" class="inp-style" type="tel" name="" placeholder="+91-9999999999">
                    </div>
                    <div class="inputs">
                        <div class="input-group">
                            <label for="">Booking Date</label>
                            <input id="departure-input" class="inp-style" type="date" name="" required="required">
                        </div>
                        <div class="input-group">
                            <label for="">Concert Date</label>
                            <input id="return-input" class="inp-style" type="date" name="" required="required">
                        </div>
                    </div>
                    <div class="input-group f-class">
                        <div>
                            <label for="">First Class ($150)</label>
                            <input id="first-class-count" class="inp-style inp-width" type="number" name="" value="0" placeholder="No. of first-class tickets">
                        </div>
                        <div class="plus-minus-btn">
                            <button
                            onclick="handleTicketChange('first-class', true)"
                            class="btn btn-default"
                            >
                            <i class="fas fa-plus"></i>
                            </button>
                            <button
                            onclick="handleTicketChange('first-class', false)"
                            class="btn btn-default"
                            >
                            <i class="fas fa-minus"></i>
                            </button>
                        </div>
                    </div>
                
                    <div class="input-group f-class">
                        <div>
                            <label for="">Economy ($100)</label>
                            <input id="economy-count"   class="inp-style inp-width"   type="number" name="" value="0" placeholder="No. of economy tickets">
                        </div>
    
                        <div class="plus-minus-btn">
                            <button
                            onclick="handleTicketChange('economy', true)"
                            class="btn btn-default"
                            >
                            <i class="fas fa-plus"></i>
                            </button>
    
                            <button
                            onclick="handleTicketChange('economy', false)"
                            class="btn btn-default"
                            >
                            <i class="fas fa-minus"></i>
                            </button>
                        </div>
                    </div>
                    <div class="calculations">
                        <div class="amount">
                            <div class="left">
                                <p>Subtotal</p>
                            </div>
                            <div class="right">
                                <p id="sub-total">$0</p>
                            </div>
                        </div>
    
                        <div class="amount">
                            <div class="left">
                                <p>Charge 10% VAT</p>
                            </div>
                            <div class="right">
                                <p id="tax-amount">$0</p>
                            </div>
                        </div>
                        <hr>
                        <div class="amount">
                            <div class="left">
                                <h4>Total</h4>
                            </div>
                            <div class="right">
                                <p id="total">$0</p>
                            </div>
                        </div>
                    </div>
                    <button id="book-now" class="btn-style">
                        Get Tickets!
                    </button>
                </div>

                <div style="padding: 2em 0; margin: 10em 2em;" id="booking-successful">
                    <center><img src="images\ticket2.jpg" alt="" width="300"/></center>
                    <h3 style="text-align: center;">Thank you so much!</h3>
                    <h5 style="text-align: center; color: #e33741;">You have successfully completed your booking.</h5>
                    <hr>
                    
                    <h5 class="text-center mt-3 flying-from-to">Hi!
                        <span id="flying-from-final-view">
                            invalid
                        </span> 
                        , Contact Info:
                        <span id="flying-to-final-view">
                            invalid
                        </span> 
                    </h5>

                    <p class="departure-return mt-3">Your booking date: <span id="departure-final-view"></span> </p>
                    <p class="departure-return">Your concert date: <span id="return-final-view"></span> </p>
                    <hr>

                    <p>You have booked <span id="first-class-count-final-view"></span> First Class ticket(s)</p>
                    <p>You have booked <span id="economy-count-final-view"></span> Economy ticket(s)</p>
                    <hr>

                    <p>Your total cost is <span id="total-final-view"></span> </p>
                    <p><a href="mailto:prathuasha2002@gmail.com">Send email</a></p>
                <div>
            </div>   
    </main>

    <!--Thank You-->
    <script>
        function handleTicketChange(ticket, isIncrease) {
          const ticketInput = document.getElementById(ticket + "-count");
          const ticketCount = getInputValueTicket(ticket);
          let ticketNewCount = ticketCount;
          if (isIncrease == true) {
            ticketNewCount = ticketCount + 1;
          }
          if (isIncrease == false && ticketCount > 0) {
            ticketNewCount = ticketCount - 1;
          }
          ticketInput.value = ticketNewCount;
          let ticketTotal = 0;
          if (ticket == "first-class") {
            ticketTotal = ticketNewCount * 1219;
          }
          if (ticket == "economy") {
            ticketTotal = ticketNewCount * 59;
          }
          calculateTotal();
        }

        function calculateTotal() {
          const firstClassCount = getInputValueTicket("first-class");
          const economyCount = getInputValueTicket("economy");

          const totalPrice = firstClassCount * 150 + economyCount * 100;

          document.getElementById("sub-total").innerText = "$" + totalPrice;

          const tax = Math.round(totalPrice * 0.1);
          document.getElementById("tax-amount").innerText = "$" + tax;

          const grandTotal = totalPrice + tax;
          document.getElementById("total").innerText = "$" + grandTotal;
        }

        function getInputValueTicket(ticket) {
          const ticketInput = document.getElementById(ticket + "-count");
          const ticketCount = parseInt(ticketInput.value);
          
          return ticketCount;
        }

        document.getElementById("book-now").addEventListener("click", function(){
            document.getElementById("booking-going-on").style.display = "none";
            document.getElementById("booking-successful").style.display = "block";

            getInputValueFlying("flying-from");
            getInputValueFlying("flying-to");
            getInputValueDate("departure");
            getInputValueDate("return");
            getCurrentTicketCount("first-class-count");
            getCurrentTicketCount("economy-count");
            getCurrentTotalCost("total");
        });

        function getInputValueFlying(status){
            const updatedStatus = document.getElementById(status + "-input").value
            if(updatedStatus != ""){
                document.getElementById(status + "-final-view").innerText = updatedStatus;
            }
            else{
                document.getElementById(status + "-final-view").innerText = "invalid";
            }
        }

        function getInputValueDate(status){
            const dateEntered = document.getElementById(status + "-input").value;
            const updatedDate = new Date(dateEntered);
            console.log(dateEntered);
            document.getElementById(status + "-final-view").innerText = updatedDate;
        }

        function getCurrentTicketCount(status){
            const updatedStatus = document.getElementById(status).value;
            document.getElementById(status + "-final-view").innerText = updatedStatus;
        }

        function getCurrentTotalCost(status){
            const updatedStatus = document.getElementById(status).innerText;
            document.getElementById(status + "-final-view").innerText = updatedStatus;
        }
    </script>
</body>
</html>